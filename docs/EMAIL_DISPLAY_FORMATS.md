# 邮件显示格式说明

## 1. 邮件列表 (list_emails)

### 格式特点
- **默认显示**: 100封邮件（之前是50封）
- **按账户分组**: 每个账户显示总数和未读数
- **单行紧凑格式**: 便于快速浏览
- **智能截断**: 主题40字符，发件人15字符

### 显示格式
```
📧 [总数] 封邮件 ([未读数] 未读)

📮 [账户邮箱] ([账户邮件数]封，[账户未读数]未读)

[标记][ID]: [主题] | [发件人] | [时间]
[标记][ID]: [主题] | [发件人] | [时间]
...

📮 [另一个账户] ([数量]封，[未读]未读)

[标记][ID]: [主题] | [发件人] | [时间]
...

⏱️ 耗时 [X.X]秒
```

### 格式说明
- **标记**: 🔴 表示未读，空格表示已读
- **ID**: 邮件ID（最多8位）
- **主题**: 最多50字符（超出显示...）
- **发件人**: 仅显示名称，最多15字符
- **时间**: MM-DD HH:MM 格式

### 示例
```
📧 100 封邮件 (23 未读)

📮 leeguoo@163.com (89封，15未读)

🔴1234567: 重要会议提醒 | 张三 | 06-20 14:30
  1234568: 周报已提交 | 李四 | 06-20 12:15
🔴1234569: 项目进度更新 | 王五 | 06-20 10:45
...

📮 leeguoo@qq.com (11封，8未读)

🔴9876543: 您的账单已出 | 腾讯服务 | 06-20 09:00
  9876544: 系统维护通知 | QQ邮箱团队 | 06-19 18:30
...

⏱️ 耗时 2.3秒
```

## 2. 最近邮件 (sync_emails action="recent")

### 格式特点
- **多行显示**: 每封邮件占3行
- **详细信息**: 显示完整主题、发件人、时间和账户
- **混合显示**: 所有账户邮件按时间排序

### 显示格式
```
📬 最近 [数量] 封邮件 ([账户范围])

[标记] [完整主题]
   发件人: [发件人名称]
   时间: [MM-DD HH:MM] | 账户: [账户邮箱]

[标记] [完整主题]
   发件人: [发件人名称]
   时间: [MM-DD HH:MM] | 账户: [账户邮箱]
...
```

### 格式说明
- **标记**: 📧 表示未读，✅ 表示已读
- **主题**: 显示完整主题，不截断
- **发件人**: 显示完整发件人名称
- **时间**: MM-DD HH:MM 格式
- **账户**: 显示邮件所属账户

### 示例
```
📬 最近 20 封邮件 (所有账户)

📧 项目进度周报 - 2024年第25周
   发件人: 项目管理部
   时间: 06-20 16:44 | 账户: leeguoo@163.com

✅ 您的订单已发货
   发件人: 京东商城
   时间: 06-20 15:30 | 账户: leeguoo@qq.com

📧 会议邀请：产品评审会
   发件人: 张经理
   时间: 06-20 14:15 | 账户: leeguoo@163.com
...
```

## 3. 搜索结果 (search_emails)

搜索结果使用与邮件列表相同的单行格式，但会在顶部显示搜索关键词：

```
🔍 找到 50 封邮件 (关键词: 'meeting')

📮 leeguoo@163.com (30封，10未读)

🔴1234567: Important meeting reminder | John | 06-20 14:30
  1234568: Meeting notes from yesterday | Jane | 06-19 16:20
...
```

## 使用场景

1. **list_emails (单行格式)**
   - 优点：信息密度高，便于快速浏览大量邮件
   - 适用：日常查看邮件列表，快速定位需要的邮件

2. **recent emails (多行格式)**
   - 优点：信息完整，阅读体验好
   - 适用：查看最新邮件，需要看清完整信息

3. **search results (单行格式)**
   - 优点：快速扫描搜索结果
   - 适用：在大量结果中快速找到目标邮件

## 技术实现

- `list_emails` 和 `search_emails`: 使用 `_format_email_list()` 方法
- `recent emails`: 使用 `_handle_get_recent_cached_emails()` 中的自定义格式
- 两种格式分别优化，满足不同使用需求